æœ€è¿‘åšåˆ°ä¸€ä¸ªé¡¹ç›®éœ€è¦å¤„ç†æ‹–æ‹½å…ƒç´ ï¼Œå› ä¸ºæœ¬èº«å†™PCé¡¹ç›®çš„æƒ…å†µä¸å¤šï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹æ‹–æ‹½åŠŸèƒ½ï¼ŒåŸç†å…¶å®å¾ˆç®€å•ã€‚

#### é¼ æ ‡äº‹ä»¶
åŸç†
åˆ©ç”¨å®šä½ï¼Œè·å–é¼ æ ‡ç§»åŠ¨çš„åæ ‡èµ‹å€¼ç»™å…ƒç´ å®ç°ä½ç½®å˜æ¢ã€‚
æ­¥éª¤
- é¼ æ ‡æŒ‰ä¸‹ï¼Œè§¦å‘mousedown
- é¼ æ ‡ç§»åŠ¨ï¼Œè§¦å‘mousemove
- é¼ æ ‡æ”¾å¼€ï¼Œè§¦å‘mouseup

![æ•ˆæœ](https://raw.githubusercontent.com/moyueating/blogImg/master/drag/mouse.gif)

```js
// drag.js
var drag = (function(){
  var canMove = false
  var initX, initY //é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡
  var tar_left, tar_top //è¢«æ‹–æ‹½å…ƒç´ åˆå§‹ä½ç½®

  mouseMove = (e, target) => {
    if(canMove){
      // const target = document.getElementById('drag')
      let left = tar_left + ( e.pageX - initX )
      let top = tar_top + ( e.pageY - initY )
      target.style.left = `${left}px`
      target.style.top = `${top}px`
    }
  }
  
  mouseUp = (e) => {
    canMove = false
  }

  return function(target){
    target.addEventListener('mousedown', (e) => {
      canMove =  true
      initX = e.pageX
      initY = e.pageY
      // è·å–è®¡ç®—å±æ€§
      var targetStyle = e.currentStyle ? e.currentStyle : window.getComputedStyle(target, null);
      tar_left = parseInt(targetStyle.left, 10) 
      tar_top =  parseInt(targetStyle.top, 10) 
    })
    document.addEventListener('mousemove', (e) => mouseMove(e, target))
    document.addEventListener('mouseup', mouseUp)
  }
})()

drag(document.getElementById('drag'))
```
```html
// html
<body ondrop="drop(event)">
  <div class="box">
    <p id="drag">æˆ‘å¯ä»¥æ‹–æ‹½</p>
  </div>
</body>
```

#### H5æ‹–æ”¾

![æ•ˆæœ](https://raw.githubusercontent.com/moyueating/blogImg/master/drag/h5_drag.gif)

```js
// drag.js
const $p = $('#drag')
let initX //å¼€å§‹æ‹–æ‹½æ˜¯é¼ æ ‡åœ¨æ–¹å—ä¸Šçš„Xä½ç½®
let initY //å¼€å§‹æ‹–æ‹½æ˜¯é¼ æ ‡åœ¨æ–¹å—ä¸Šçš„Yä½ç½®
let p_left
let p_top

function start(e){
  p_left = $p.position().left
  p_top = $p.position().top
  initX = e.pageX
  initY = e.pageY
}

function end(e){
  $p.css({
    top: p_top + ( e.pageY - initY),
    left: p_left + (e.pageX - initX),
  })
}
```
```html
// html
<body ondrop="drop(event)">
  <div class="box">
    <p id="drag" draggable="true" ondragstart="start(event)" ondrag="drag(event)" ondragend="end(event)">æˆ‘å¯ä»¥æ‹–æ‹½</p>
  </div>
</body>

```

è¿™é‡Œä¸¤ä¸ªéƒ½èƒ½å®ç°å¯¹åº”çš„æ‹–æ‹½åŠŸèƒ½ï¼Œé¼ æ ‡æ‹–æ”¾ç¨å¾®è´¹ç‚¹æ€§èƒ½ï¼Œä½†æ˜¯å¯å®šåˆ¶æ€§æ¯”è¾ƒå¼ºï¼ŒH5æ‹–æ”¾APIæ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯ä¼šæœ‰åŠé€æ˜å‰¯æœ¬è¿™ç§å‰¯ä½œç”¨ï¼Œå…·ä½“åœºæ™¯å…·ä½“æ“ä½œå§ã€‚

è¿™é‡Œè¿˜è¦ä¸€ä¸ªè¦æ³¨æ„çš„ï¼Œåˆ©ç”¨é¼ æ ‡ç§»åŠ¨çš„æƒ…å†µä¸‹ï¼Œåˆ‡æ¢é¡µé¢çš„æ—¶å€™è®°å¾—é‡Šæ”¾èµ„æºï¼Œä¸ç„¶ç»‘å®šçš„é¼ æ ‡äº‹ä»¶ä¸€ç›´å­˜åœ¨ï¼Œä¼šå¡æ­»ä½ ğŸ˜..

addEventListenerç»‘å®šçš„äº‹ä»¶å‡½æ•°å’Œè§£ç»‘çš„äº‹ä»¶å‡½æ•°å¿…é¡»æ˜¯åŒä¸€ä¸ªï¼Œä¸ç„¶è§£ç»‘ä¸ä¼šæˆåŠŸçš„ï¼Œè¿˜æ˜¯ä¼šå¡æ­»ä½ ğŸ˜..


